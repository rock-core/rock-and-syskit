<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="IE=edge" http-equiv="X-UA-Compatible">
        <meta charset="utf-8">
        <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Building Robots with Rock and Syskit</title>

        <link href="../images/favicon.ico" rel="icon" type="image/ico" relative="true" />
        <link href="../stylesheets/site.css" rel="stylesheet" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    </head>

    <body class="basics basics_index">
            <!-- top navbar -->
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li><a href="../">Home</a></li>
                    <li><a href="../about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3" role="complementary">
                <nav class="docs-sidebar" data-spy="affix">
                    <ul class="nav"><li class='child'><a href="../">Building robots with Rock and Syskit</a></li><li class='parent active'><span class='parent-label'><a href="./">Basics</a></span><ul><li class='child active'><a href="./">Introduction</a></li><li class='child'><a href="installation.html">Installation</a></li><li class='child'><a href="day_to_day.html">Day-to-day Workspace Commands</a></li><li class='child'><a href="getting_started.html">Getting Started</a></li><li class='child'><a href="composition.html">Compositions</a></li><li class='child'><a href="constant_generator.html">Constant Generator</a></li><li class='child'><a href="devices.html">Profiles and Devices</a></li><li class='child'><a href="deployment.html">Deployment</a></li><li class='child'><a href="publishing.html">Publishing</a></li><li class='child'><a href="validation.html">Configuration Consistency</a></li><li class='child'><a href="recap.html">Recap</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../runtime_overview/">Runtime Overview</a></span><ul><li class='child'><a href="../runtime_overview/">Introduction</a></li><li class='child'><a href="../runtime_overview/task_structure.html">Task Structures</a></li><li class='child'><a href="../runtime_overview/event_loop.html">Event Loop</a></li><li class='child'><a href="../runtime_overview/exceptions.html">Errors</a></li><li class='child'><a href="../runtime_overview/live_data.html">Live Data Visualization</a></li><li class='child'><a href="../runtime_overview/recap.html">Recap</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../workspace/">Workspace and Packages</a></span><ul><li class='child'><a href="../workspace/">Introduction</a></li><li class='child'><a href="../workspace/conventions.html">Conventions</a></li><li class='child'><a href="../workspace/setup.html">Starting a New Project</a></li><li class='child'><a href="../workspace/add_packages.html">Adding new packages</a></li><li class='child'><a href="../workspace/os_dependencies.html">OS Dependencies</a></li><li class='child'><a href="../workspace/global_configuration.html">Global Configuration</a></li><li class='child'><a href="../workspace/testing.html">Test Integration</a></li><li class='child'><a href="../workspace/managing.html">Build configuration design</a></li><li class='child'><a href="../workspace/troubleshooting.html">Troubleshooting</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../libraries/">Libraries</a></span><ul><li class='child'><a href="../libraries/">Introduction</a></li><li class='child'><a href="../libraries/add_packages.html">Add packages</a></li><li class='child'><a href="../libraries/cpp_libraries.html">C++ Library Packages</a></li><li class='child'><a href="../libraries/geometric_transformations.html">Geometric Transformations in C++ Libraries</a></li><li class='child'><a href="../libraries/ruby_libraries.html">Ruby Library Packages</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../components/">Components</a></span><ul><li class='child'><a href="../components/">Writing Components</a></li><li class='child'><a href="../components/orogen_packages.html">oroGen Packages</a></li><li class='child'><a href="../components/defining_types.html">Defining Types</a></li><li class='child'><a href="../components/importing_types.html">Importing Types</a></li><li class='child'><a href="../components/interface.html">Interface</a></li><li class='child'><a href="../components/state_machine.html">State Machine</a></li><li class='child'><a href="../components/writing_the_hooks.html">Writing the Hooks</a></li><li class='child'><a href="../components/timestamping.html">Timestamping</a></li><li class='child'><a href="../components/stream_aligner.html">Stream Aligner</a></li><li class='child'><a href="../components/geometric_transformations.html">Geometric Transformations</a></li><li class='child'><a href="../components/deployment.html">Deployments</a></li><li class='child'><a href="../components/runtime.html">Runtime</a></li><li class='child'><a href="../components/testing.html">Testing</a></li><li class='child'><a href="../components/types_in_ruby.html">Types in Ruby</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../component_networks/">Designing Component Networks</a></span><ul><li class='child'><a href="../component_networks/">Introduction</a></li><li class='child'><a href="../component_networks/composition.html">Compositions</a></li><li class='child'><a href="../component_networks/profiles.html">Profiles</a></li><li class='child'><a href="../component_networks/reusable_networks.html">Reusable Networks</a></li><li class='child'><a href="../component_networks/devices_and_busses.html">Robot definition&colon; Devices and Busses</a></li><li class='child'><a href="../component_networks/dynamic_services.html">Dynamic Services</a></li><li class='child'><a href="../component_networks/geometric_transformations.html">Geometric Transformations</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../coordination/">Coordination</a></span><ul><li class='child'><a href="../coordination/">Introduction</a></li><li class='child'><a href="../coordination/generalities.html">Generalities</a></li><li class='child'><a href="../coordination/tasks_and_events.html">Tasks and Events</a></li><li class='child'><a href="../coordination/action_methods.html">Action Methods</a></li><li class='child'><a href="../coordination/action_state_machines.html">Action State Machines</a></li><li class='child'><a href="../coordination/component_networks.html">Component Networks</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../simulation/">Simulation with Gazebo</a></span><ul><li class='child'><a href="../simulation/">Introduction</a></li><li class='child'><a href="../simulation/models_links_and_joints.html">Models, Links, Joints and Sensors</a></li><li class='child'><a href="../simulation/plugins.html">Plugins</a></li><li class='child'><a href="../simulation/transformer.html">Transformer</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../syskit_error_handling/">Error Handling</a></span><ul><li class='child'><a href="../syskit_error_handling/">Introduction</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../log_management/">Log Management</a></span><ul><li class='child'><a href="../log_management/">Introduction</a></li><li class='child'><a href="../log_management/runtime.html">Log Generation at Runtime</a></li><li class='child'><a href="../log_management/datastore.html">Storing Logs</a></li><li class='child'><a href="../log_management/jupyter.html">Log Analysis with Jupyter</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../testing/">Testing and Debugging</a></span><ul><li class='child'><a href="../testing/">Introduction</a></li><li class='child'><a href="../testing/component.html">Component Tests</a></li><li class='child'><a href="../testing/integration.html">Integration Tests</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../cookbook/">Cookbook</a></span><ul><li class='child'><a href="../cookbook/">Introduction</a></li><li class='child'><a href="../cookbook/device_drivers.html">Device Drivers with iodrivers_base</a></li><li class='child'><a href="../cookbook/http_api.html">Control and Monitoring through a HTTP API</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../deprecations/">Deprecated Behaviors</a></span><ul><li class='child'><a href="../deprecations/">Introduction</a></li><li class='child'><a href="../deprecations/backward_compatible_naming.html">Backward compatible naming</a></li><li class='child'><a href="../deprecations/update_properties.html">Introduction of the `update_properties` method</a></li></ul></li></ul>
                </nav>
            </div>
            <div class="col-md-9" role="main">
                <h1 id="basics-in-integrating-a-system-from-scratch-using-gazebo-and-syskit">Basics in integrating a system from scratch using Gazebo and Syskit</h1>

<p>Rock and Syskit provide a seamless integration with Gazebo. We will leverage
this integration in this section to discover how to use existing components to
build and control a minimal system. This should give you a hint about what Rock
offers at runtime as well as the basics of package and component management.</p>

<p>This will cover building a simple system and simulating using Gazebo. It will
only base itself on existing components (no new components will be developed).</p>

<p>This section will start by <a href="installation.html">bootstrapping a Rock
installation</a>. After the install, all examples that have to be run inside a
terminal assume that you have sourced this installation's <code>env.sh</code> file in the
current terminal.</p>

<p>When applicable, we will breach advanced topics, or explanations about how
things are implemented under-the-hood. These will be clearly indicated by
a box like this:</p>

<div class="panel panel-warning">
  <div class="panel-heading">

    <p><a class="btn btn-warning" role="button" data-toggle="collapse" href="#under_the_hood" aria-expanded="false" aria-controls="under_the_hood">
  Advanced
</a><span class="advanced_description">This will hold the summary. Just click on "Advanced".</span></p>
  </div>
  <div class="collapse panel-body" id="under_the_hood">
    <p>The details will be here.</p>
  </div>
</div>

<h2 id="concepts">Basic Concepts</h2>

<p><strong>Design and runtime</strong> Rock is a model-based architecture. A Rock system is
described <strong>at design time</strong>, that is before any piece of the actual
processing code needs to be run, and can verify properties regarding the
final system then. <strong>Runtime</strong> then refers to the point where the actual data
processing code runs – which involves hardware or simulation in case of
robotics.</p>

<p><strong>Libraries, Components and System</strong> Deep-down, the bulk of the code that
makes a Rock system is organized in libraries. Libraries propose APIs -
interfaces - to solve particular problems, e.g. OpenCV to process images, PCL
to process point clouds, a GPS driver to control a GPS device and read GPS
positions, … This way to organize software development is nothing specific to
Rock or even robotics. It's the principal way software is developed <em>period</em>.</p>

<p>However, libraries <em>offer</em> functionality, but do not specify how this
functionality should be integrated to offer a "runtime", i.e. how the actual
data being processed can be passed to the processing code in the libraries,
from the sensors to the actuators, to turn all that code into a robot.</p>

<p>To integrate these libraries at runtime, Rock uses a <strong>components</strong> paradigm. Components are
black boxes that have inputs and produce outputs - exchanging data through streams. It's by meshing these
components together - connecting outputs to inputs - that an active
sensor-processing-actuator loop is created and that the robot can act and react
in its environment. In addition to this <em>dataflow interface</em> (data inputs and
outputs), Rock components also offer a <em>configuration</em> interface where parameters
can be chosen and tested.</p>

<p>In Rock, these components are implemented in <strong>oroGen
packages</strong>. They are described in an orogen file, which code-generates the
skeleton of the components. oroGen packages also define the datatypes that
can be transferred between the components.</p>

<p>What sets Rock apart from other component-based systems is the ability to
reconfigure the component network to fit the situation as best as possible.
This is made possible by explicitly choosing at any point in time both which
components are active, and which output-input connections are present in the
network. <strong>Syskit</strong> is the tool that makes such a design feasible, pushing most
of the complexity of such a dynamic system into the tool, leaving the developer
make higher-level design decisions.</p>

<p><strong>Software Packages</strong> A software package is a way to distribute code (software).
Rock's only convention is to have one library corresponding to one package or
one component to one package. Libraries should be "fat", components "slim". That is,
most of the functionality should be implemented as a component-independent
library.</p>

<h2 id="progression">Progression</h2>

<p>After having <a href="installation.html">installed Rock</a> and <a href="day_to_day.html">learn a bit how to manage
a Rock workspace</a>, we'll get into <a href="getting_started.html">creating a new Syskit app
with a SDF scene</a>.</p>

<p>After this, we will learn how to use an arm interface component provided by the
Gazebo interface as well as existing Rock components to implement cartesian
and joint control networks for this arm.</p>

<p>Functionally, this will look like:</p>

<p><img src="media/progression_initial.svg" alt="Schematic of the arm control networks" class="fullwidth" /></p>

<table class="table">
<thead>
    <tr>
    <th>What you will do</th>
    <th>What concepts are covered</th>
    </tr>
</thead>
<tbody>
    <tr>
    <td><a href="composition.html">Creating an arm control network</a></td>
    <td>Installing new packages, Compositions</td>
    </tr>
    <tr>
    <td><a href="constant_generator.html">Holding position in the cartesian space</a></td>
    <td>Constant Generator, Profiles</td>
    </tr>
    <tr>
    <td><a href="devices.html">Binding the component networks to the simulator</a></td>
    <td>Devices</td>
    </tr>
    <tr>
    <td><a href="deployment.html">Running the networks</a></td>
    <td>Deployment and runtime</td>
    </tr>
</tbody>
</table>

<p class="next-page"><strong>Next</strong>: <a href="installation.html">let's get started by creating a new Rock workspace</a></p>

            </div>
        </div>
    </div>

    <script>
    $('.docs-sidebar').affix({
        offset: {
            top: $('.docs-sidebar').offset().top
        }
    });
    </script>


        <footer class="container-fluid text-center">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource" property="dct:title" rel="dct:type">Building Robots with Rock and Syskit</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/doudou" property="cc:attributionName" rel="cc:attributionURL">Sylvain Joyeux</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>. Copyright Sylvain Joyeux and Contributors
        </footer>
    </body>
</html>
